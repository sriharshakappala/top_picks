<h1>Toppack - Search any JavaScript repository on Github instantly!</h1>
<% if params[:query].present? %>
  <a href="/search"><< Back to Home</a><br>
<% end %>
<a href="#">Top packages across Github</a><br><br>

<%= form_tag('/search', :method => :get) do %>
  <%= text_field_tag 'query', params[:query], :autocomplete => :off, :autofocus => true %>
  <%= submit_tag 'Search' %>
<% end %>

<br><br>
<% if params[:query].present? %>
  <% if @repos['total_count'] == 0 %>
    <h4>Sorry! No results found for your search query</h4>
  <% else %>
    <table>
      <tr>
        <th>Repo Name</th>
        <th>Stars</th>
        <th>Forks</th>
        <th>Import</th>
      </tr>
      <% @repos['items'].each do |repo| %>
        <tr>
          <td><%= repo['full_name'] %></td>
          <td><%= repo['stargazers_count'] %></td>
          <td><%= repo['forks'] %></td>
          <td><input class="import" type="button" onclick="repo_import('<%= repo['full_name'] %>')" value="Import Repo"></td>
        </tr>
      <% end %>
    </table>
  <% end %>
<% end %>

<script>
function repo_import(repo) {
  console.log('Test');
}
</script>
